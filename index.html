<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>RISC-V CPU Plan – Local (static + localStorage)</title>
  <style>
    :root{
      --bg-1: #0b0f14;
      --bg-2: #0f1720;
      --card: rgba(255,255,255,0.04);
      --muted: rgba(255,255,255,0.6);
      --text: #e6eef6;
      --accent: #6ee7b7;
      --accent-2: #7c5cff;
      --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.02);
      --success: #27ae60;
      --task-toggle-reserve: 96px; /* space on the right so toggles don't overlap */
    }

    *{box-sizing:border-box;margin:0;padding:0;font-family:Inter, "Segoe UI", system-ui, -apple-system, "Helvetica Neue", Arial;}
    html,body{height:100%}
    body{
      min-height:100vh;
      background: linear-gradient(135deg,var(--bg-1) 0%, var(--bg-2) 100%);
      color:var(--text);
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      line-height:1.5;
    }

    .container{max-width:1400px;margin:0 auto;}
    header{text-align:center;margin-bottom:30px;}
    header h1{font-size:2.2rem;letter-spacing:-0.5px;color:var(--text);margin-bottom:6px;}
    .subtitle{color:var(--muted);font-size:1.02rem}

    h2{
      font-size:1.45rem;
      margin:20px 0 14px;
      color:var(--accent-2);
      border-bottom:1px solid rgba(124,92,255,0.12);
      padding-bottom:8px;
    }
    h3{font-size:1.1rem;color:var(--text);margin-bottom:6px}
    h4{font-size:1rem;color:var(--text);margin-bottom:8px}

    .card{
      background: linear-gradient(180deg, var(--card), rgba(255,255,255,0.01));
      border-radius:12px;
      padding:20px;
      margin-bottom:22px;
      box-shadow: 0 6px 18px rgba(2,6,23,0.6);
      border: 1px solid rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
    }

    .team-grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(260px,1fr));
      gap:18px;
      margin-bottom:28px;
    }

    .member-card{
      background: linear-gradient(180deg,var(--glass), var(--glass-2));
      border-radius:12px;
      padding:18px;
      text-align:left;
      box-shadow: 0 8px 30px rgba(2,6,23,0.55);
      border: 1px solid rgba(255,255,255,0.02);
      transition: transform .18s ease, box-shadow .18s ease;
    }
    .member-card:hover{ transform: translateY(-6px); box-shadow: 0 12px 40px rgba(2,6,23,0.7); }

    .member-name{
      font-weight:600;
      font-size:1.05rem;
      margin-bottom:6px;
      color:var(--text);
      display:inline-block;
      min-width:120px;
      padding:6px 8px;
      border-radius:8px;
      background: transparent;
      transition: background .12s ease, box-shadow .12s ease;
      outline: none;
      cursor:text;
    }
    .member-name[contenteditable="true"]:focus{
      background: rgba(124,92,255,0.06);
      box-shadow: 0 6px 18px rgba(124,92,255,0.06);
      border: 1px solid rgba(124,92,255,0.12);
    }
    .member-role{ display:block;font-style:italic;color:var(--muted);margin-bottom:12px; }
    .member-card p{color:var(--muted);font-size:0.95rem;line-height:1.45}

    /* Timeline (stacked, no leftover space) */
    .timeline{
      position:relative;max-width:1200px;margin:0 auto 36px;display:grid;gap:16px;
    }
    .timeline::before{
      content:'';
      position:absolute;
      left:26px; top:0; bottom:0;
      width:3px; background:linear-gradient(180deg,var(--accent),var(--accent-2));
      border-radius:2px; opacity:0.85;
    }
    .week-container{ position:relative; width:100%; padding:14px 20px 14px 64px; box-sizing:border-box; }
    .week-container::before{
      content:''; position:absolute; left:22px; top:26px; width:12px; height:12px; border-radius:50%;
      background:var(--accent-2); box-shadow:0 0 0 3px rgba(124,92,255,0.18);
    }
    .week-content{
      padding:18px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px; box-shadow:0 8px 24px rgba(2,6,23,0.6); border:1px solid rgba(255,255,255,0.02);
    }
    .week-label{
      position:absolute; left:8px; top:18px; width:auto; min-width:82px; height:28px; line-height:28px; padding:0 10px; text-align:center;
      background:linear-gradient(90deg,var(--accent-2),var(--accent)); color:#09101a; border-radius:14px; font-weight:700; z-index:2;
      box-shadow:0 6px 14px rgba(124,92,255,0.18);
    }

    .task-grid{ display:grid; grid-template-columns:repeat(auto-fit, minmax(200px,1fr)); gap:12px; margin-top:14px; }
    .task-card{
      position:relative;
      background: rgba(255,255,255,0.02);
      border-left: 4px solid rgba(255,255,255,0.04);
      padding:12px var(--task-toggle-reserve) 12px 12px; /* reserve right space for toggle */
      border-radius:8px; font-size:0.95rem; color:var(--muted);
    }
    .task-card strong{ color:var(--text); }
    .person-task{margin-top:8px;font-weight:600;color:var(--text);font-size:0.92rem}

    .person-A { border-left-color: rgba(231,76,60,0.9); }
    .person-B { border-left-color: rgba(52,152,219,0.95); }
    .person-C { border-left-color: rgba(46,204,113,0.95); }
    .person-D { border-left-color: rgba(243,156,18,0.9); }
    .person-E { border-left-color: rgba(155,89,182,0.95); }
    .person-F { border-left-color: rgba(26,188,156,0.95); }

    .deliverables{background: rgba(255,255,255,0.02);padding:12px;border-radius:8px;margin-top:12px;color:var(--muted)}
    .deliverables ul{padding-left:18px}
    .deliverables li{margin-bottom:8px}

    /* Task 'Done' toggle */
    .task-done-toggle{
      position:absolute; top:8px; right:8px;
      display:flex; align-items:center; gap:6px;
      padding:4px 8px; border-radius:999px;
      background: rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.05);
      z-index:1; white-space:nowrap;
    }
    .task-done-checkbox{ width:16px; height:16px; cursor:pointer; accent-color: var(--accent); }
    .task-done-label{ color:var(--muted); font-size:0.82rem; user-select:none; }
    .task-card.is-done{ border-left-color: var(--success); background: linear-gradient(180deg, rgba(39,174,96,0.08), rgba(255,255,255,0.01)); }
    .task-card.is-done .task-done-label{ color: var(--accent); }

    /* KPI chips (3 tiles) */
    .kpi-chips{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(280px,1fr)); gap:12px; margin:16px 0 10px;
    }
    .kpi-chip{
      display:flex; align-items:center; gap:12px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04); border-radius:12px; padding:10px 12px;
    }
    .kpi-vis{ flex:0 0 auto; display:flex; align-items:center; justify-content:center; }
    .kpi-body{ flex:1; min-width:0; display:flex; flex-direction:column; gap:6px; }
    .kpi-head{ display:flex; align-items:center; justify-content:space-between; gap:8px; }
    .kpi-title{ font-weight:700; color:var(--text); font-size:0.98rem; }
    .kpi-percent{ color:var(--accent); font-weight:700; font-variant-numeric:tabular-nums; }
    .kpi-hint{ color:var(--muted); font-size:0.85rem; opacity:0.85; }
    .kpi-inputs{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .input-range{
      appearance:none; width:100%; height:6px; border-radius:6px; background: rgba(255,255,255,0.06); outline:none;
    }
    .input-range::-webkit-slider-thumb{
      appearance:none; width:14px; height:14px; border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--accent-2)); border:none; box-shadow:0 0 0 3px rgba(124,92,255,0.18); cursor:pointer;
    }
    .input-range::-moz-range-thumb{
      width:14px; height:14px; border:none; border-radius:50%;
      background: linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:0 0 0 3px rgba(124,92,255,0.18); cursor:pointer;
    }
    .input-mini{
      width:82px; padding:6px 8px; border-radius:8px; border:1px solid rgba(255,255,255,0.06);
      background: rgba(255,255,255,0.02); color:var(--text); font-size:0.95rem;
    }
    .sep{ color:var(--muted); }

    /* Rings */
    .micro-ring, .nano-ring{ display:block; }
    .micro-ring .ring-bg, .nano-ring .ring-bg{
      fill:none; stroke: rgba(255,255,255,0.10);
    }
    .micro-ring .ring-bg{ stroke-width:6; }
    .nano-ring .ring-bg{ stroke-width:5; }
    .ring-progress{
      fill:none; stroke: #00b894; stroke-linecap: round;
      stroke-dasharray: 999; stroke-dashoffset: 999;
      transform: rotate(-90deg); transform-origin: 50% 50%;
      transition: stroke-dashoffset .35s ease, stroke .25s ease;
    }
    .micro-ring .ring-progress{ stroke-width:6; }
    .nano-ring .ring-progress{ stroke-width:5; }

    /* Team summary */
    .team-summary{ margin: 6px 0 10px; }
    .micro-section-title{ color:var(--muted); font-size:0.9rem; margin:6px 2px 8px; }
    .team-summary-chips{
      display:grid; grid-template-columns: repeat(auto-fit, minmax(180px,1fr)); gap:8px;
    }
    .summary-chip{
      display:flex; align-items:center; gap:10px;
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(255,255,255,0.04); border-radius:10px; padding:6px 8px;
    }
    .summary-body{ display:flex; justify-content:space-between; align-items:center; gap:8px; width:100%; }
    .summary-name{ color:var(--text); font-weight:700; }
    .summary-percent{ color:var(--accent); font-weight:700; font-variant-numeric:tabular-nums; }

    /* Module diagram and footer */
    .module-diagram{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-radius:12px;padding:18px;margin-top:22px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    .module-grid{display:grid;grid-template-columns:repeat(auto-fit, minmax(240px,1fr));gap:14px;margin-top:14px}
    .module-card{background: rgba(255,255,255,0.02);padding:14px;border-radius:10px;text-align:center;border-top:4px solid rgba(124,92,255,0.14)}
    .module-card p{color:var(--muted); font-size:0.95rem}

    .ref-member { font-weight:700; color:var(--text); white-space:nowrap; }
    footer{text-align:center;margin-top:36px;color:var(--muted);font-size:0.9rem}

    /* Responsive fixes for toggle overlap */
    @media screen and (max-width: 640px){
      .task-done-toggle{ position:static; float:right; margin-top:8px; }
      .task-card{ padding-right:12px; }
    }
    @media screen and (max-width: 420px){ .task-done-label{ display:none; } }

    @media screen and (max-width:768px){
      .week-label{ top:14px; }
      .week-container{ padding-left:60px; }
    }

    /* Accessibility helper */
    .sr-only{
      position:absolute !important; width:1px !important; height:1px !important; padding:0 !important; margin:-1px !important;
      overflow:hidden !important; clip:rect(0,0,0,0) !important; white-space:nowrap !important; border:0 !important;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>RISC-V 32b CPU – Local Plan</h1>
      <p class="subtitle">Static version (localStorage only)</p>
    </header>

    <div class="card">
      <h2>Project Overview</h2>
      <p>This static plan uses localStorage for persistence on your device. Project Completion is auto-calculated from the timeline task toggles; KPIs are editable and saved locally.</p>

      <!-- KPI chips: compact, non-intrusive -->
      <div class="kpi-chips" aria-live="polite">
        <!-- Project Completion (auto from timeline tasks) -->
        <div class="kpi-chip" data-kpi="completion">
          <div class="kpi-vis">
            <svg class="micro-ring" width="56" height="56" viewBox="0 0 56 56" aria-hidden="true">
              <circle class="ring-bg" cx="28" cy="28" r="24"></circle>
              <circle class="ring-progress" cx="28" cy="28" r="24"></circle>
            </svg>
          </div>
          <div class="kpi-body">
            <div class="kpi-head">
              <span class="kpi-title">Project Completion</span>
              <span class="kpi-percent" data-kpi-percent>0%</span>
            </div>
            <div class="kpi-inputs"><span class="kpi-hint" aria-hidden="true">Auto from timeline tasks</span></div>
          </div>
        </div>

        <!-- Module Test Pass Rate -->
        <div class="kpi-chip" data-kpi="tests">
          <div class="kpi-vis">
            <svg class="micro-ring" width="56" height="56" viewBox="0 0 56 56" aria-hidden="true">
              <circle class="ring-bg" cx="28" cy="28" r="24"></circle>
              <circle class="ring-progress" cx="28" cy="28" r="24"></circle>
            </svg>
          </div>
          <div class="kpi-body">
            <div class="kpi-head">
              <span class="kpi-title">Module Test Pass Rate</span>
              <span class="kpi-percent" data-kpi-percent>0%</span>
            </div>
            <div class="kpi-inputs">
              <label class="sr-only" for="tests-passed">Tests passed</label>
              <input id="tests-passed" class="input-mini input-passed" type="number" min="0" step="1" value="0" aria-label="Tests passed" />
              <span class="sep">/</span>
              <label class="sr-only" for="tests-total">Total tests</label>
              <input id="tests-total" class="input-mini input-total" type="number" min="0" step="1" value="0" aria-label="Total tests" />
            </div>
          </div>
        </div>

        <!-- Code Coverage -->
        <div class="kpi-chip" data-kpi="coverage">
          <div class="kpi-vis">
            <svg class="micro-ring" width="56" height="56" viewBox="0 0 56 56" aria-hidden="true">
              <circle class="ring-bg" cx="28" cy="28" r="24"></circle>
              <circle class="ring-progress" cx="28" cy="28" r="24"></circle>
            </svg>
          </div>
          <div class="kpi-body">
            <div class="kpi-head">
              <span class="kpi-title">Code Coverage</span>
              <span class="kpi-percent" data-kpi-percent>0%</span>
            </div>
            <div class="kpi-inputs">
              <input class="input-range coverage-range" type="range" min="0" max="100" step="1" value="0" aria-label="Code coverage slider" />
              <input class="input-mini coverage-number" type="number" min="0" max="100" step="1" value="0" aria-label="Code coverage percent" />
            </div>
          </div>
        </div>
      </div>
    </div>

    <h2>Team Roles & Responsibilities</h2>
    <div class="team-grid">
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="A" aria-label="Edit member name A" tabindex="0">Person A</div>
        <div class="member-role">Project Architect & Control Unit</div>
        <p>Oversees system design, module interfaces, and implements control logic, instruction decoder.</p>
      </div>
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="B" aria-label="Edit member name B" tabindex="0">Person B</div>
        <div class="member-role">ALU & Branch Unit</div>
        <p>Implements arithmetic/logic operations, branch comparison logic, and data path components.</p>
      </div>
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="C" aria-label="Edit member name C" tabindex="0">Person C</div>
        <div class="member-role">Instruction Fetch & Decode</div>
        <p>Handles program counter, instruction memory, and instruction decoding logic.</p>
      </div>
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="D" aria-label="Edit member name D" tabindex="0">Person D</div>
        <div class="member-role">Register File & Data Memory</div>
        <p>Implements 32x32 register file, data memory interface, and load/store operations.</p>
      </div>
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="E" aria-label="Edit member name E" tabindex="0">Person E</div>
        <div class="member-role">Verification & Testing</div>
        <p>Develops testbenches, test programs, and verification strategies for all modules.</p>
      </div>
      <div class="member-card">
        <div class="member-name" contenteditable="true" data-member="F" aria-label="Edit member name F" tabindex="0">Person F</div>
        <div class="member-role">Toolchain & Infrastructure</div>
        <p>Manages development environment, toolchain setup, and continuous integration.</p>
      </div>
    </div>

    <h2>6-Week Development Timeline</h2>

    <!-- Team completion summary (auto from timeline task toggles) -->
    <div class="team-summary" aria-live="polite">
      <div class="micro-section-title">Team completion summary</div>
      <div class="team-summary-chips">
        <div class="summary-chip" data-person="A">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="A">Person A</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
        <div class="summary-chip" data-person="B">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="B">Person B</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
        <div class="summary-chip" data-person="C">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="C">Person C</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
        <div class="summary-chip" data-person="D">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="D">Person D</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
        <div class="summary-chip" data-person="E">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="E">Person E</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
        <div class="summary-chip" data-person="F">
          <svg class="nano-ring" width="44" height="44" viewBox="0 0 44 44" aria-hidden="true">
            <circle class="ring-bg" cx="22" cy="22" r="18"></circle>
            <circle class="ring-progress" cx="22" cy="22" r="18"></circle>
          </svg>
          <div class="summary-body">
            <span class="summary-name"><span class="ref-member" data-ref-member="F">Person F</span></span>
            <span class="summary-percent" data-summary-percent>0%</span>
          </div>
        </div>
      </div>
    </div>

    <div class="timeline">
      <div class="week-container">
        <div class="week-label">Week 1</div>
        <div class="week-content">
          <h3>Foundation & Specification</h3>
          <p>Establish development environment and finalize CPU specifications.</p>

          <div class="task-grid">
            <div class="task-card person-F">
              <strong><span class="ref-member" data-ref-member="F">Person F</span>:</strong> Set up Verilog simulator, RISC-V toolchain
              <div class="person-task">Deliverable: Working development environment</div>
            </div>
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Define module interfaces, control signals
              <div class="person-task">Deliverable: System block diagram</div>
            </div>
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Create basic testbench framework
              <div class="person-task">Deliverable: Testbench skeleton</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>, <span class="ref-member" data-ref-member="C">Person C</span>, <span class="ref-member" data-ref-member="D">Person D</span>:</strong> Research RV32I instruction set
              <div class="person-task">Deliverable: Instruction set spec</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 1 Deliverables:</strong>
            <ul>
              <li>Development environment setup</li>
              <li>Complete system block diagram</li>
              <li>Instruction set specification document</li>
              <li>Module interface definitions</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="week-container">
        <div class="week-label">Week 2</div>
        <div class="week-content">
          <h3>Core Module Development</h3>
          <p>Implement and individually test major CPU components.</p>

          <div class="task-grid">
            <div class="task-card person-D">
              <strong><span class="ref-member" data-ref-member="D">Person D</span>:</strong> Implement 32x32 register file
              <div class="person-task">Deliverable: Working register file module</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>:</strong> Build ALU with basic operations
              <div class="person-task">Deliverable: ALU supporting 10+ operations</div>
            </div>
            <div class="task-card person-C">
              <strong><span class="ref-member" data-ref-member="C">Person C</span>:</strong> Implement instruction fetch unit
              <div class="person-task">Deliverable: PC and instruction memory</div>
            </div>
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Design control unit structure
              <div class="person-task">Deliverable: Control signal definitions</div>
            </div>
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Develop module testbenches
              <div class="person-task">Deliverable: Individual module tests</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 2 Deliverables:</strong>
            <ul>
              <li>Register file module with tests</li>
              <li>ALU module with tests</li>
              <li>Instruction fetch unit</li>
              <li>Control unit structure</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="week-container">
        <div class="week-label">Week 3</div>
        <div class="week-content">
          <h3>Module Completion & Integration Prep</h3>
          <p>Finish all core modules and prepare for system integration.</p>

          <div class="task-grid">
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Complete control unit implementation
              <div class="person-task">Deliverable: Full control unit</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>:</strong> Implement branch unit
              <div class="person-task">Deliverable: Branch comparison logic</div>
            </div>
            <div class="task-card person-C">
              <strong><span class="ref-member" data-ref-member="C">Person C</span>:</strong> Build instruction decoder
              <div class="person-task">Deliverable: Complete decoder</div>
            </div>
            <div class="task-card person-D">
              <strong><span class="ref-member" data-ref-member="D">Person D</span>:</strong> Implement data memory unit
              <div class="person-task">Deliverable: Load/store handling</div>
            </div>
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Create integration test plan
              <div class="person-task">Deliverable: System test strategy</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 3 Deliverables:</strong>
            <ul>
              <li>Complete control unit</li>
              <li>Branch and jump unit</li>
              <li>Instruction decoder</li>
              <li>Data memory interface</li>
              <li>Integration test plan</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="week-container">
        <div class="week-label">Week 4</div>
        <div class="week-content">
          <h3>System Integration</h3>
          <p>Connect all modules into a working single-cycle CPU.</p>

          <div class="task-grid">
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Lead integration effort
              <div class="person-task">Deliverable: Integrated CPU</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>, <span class="ref-member" data-ref-member="C">Person C</span>, <span class="ref-member" data-ref-member="D">Person D</span>:</strong> Fix module interface issues
              <div class="person-task">Deliverable: Working data paths</div>
            </div>
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Run integration tests
              <div class="person-task">Deliverable: Basic instruction tests</div>
            </div>
            <div class="task-card person-F">
              <strong><span class="ref-member" data-ref-member="F">Person F</span>:</strong> Set up automated builds
              <div class="person-task">Deliverable: CI pipeline</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 4 Deliverables:</strong>
            <ul>
              <li>Fully integrated single-cycle CPU</li>
              <li>Basic instruction execution</li>
              <li>Automated build system</li>
              <li>Integration test results</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="week-container">
        <div class="week-label">Week 5</div>
        <div class="week-content">
          <h3>Verification & Pipelining</h3>
          <p>Thorough testing and begin pipelined architecture implementation.</p>

          <div class="task-grid">
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Comprehensive CPU testing
              <div class="person-task">Deliverable: Test coverage report</div>
            </div>
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Design 5-stage pipeline
              <div class="person-task">Deliverable: Pipeline diagram</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>, <span class="ref-member" data-ref-member="C">Person C</span>:</strong> Implement pipeline registers
              <div class="person-task">Deliverable: Pipeline stage separation</div>
            </div>
            <div class="task-card person-D">
              <strong><span class="ref-member" data-ref-member="D">Person D</span>:</strong> Research hazard detection
              <div class="person-task">Deliverable: Hazard mitigation plan</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 5 Deliverables:</strong>
            <ul>
              <li>Comprehensive test suite</li>
              <li>Pipeline architecture design</li>
              <li>Pipeline stage implementation</li>
              <li>Hazard detection strategy</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="week-container">
        <div class="week-label">Week 6</div>
        <div class="week-content">
          <h3>Final Integration & Demo</h3>
          <p>Complete working CPU with demonstration programs.</p>

          <div class="task-grid">
            <div class="task-card person-A">
              <strong><span class="ref-member" data-ref-member="A">Person A</span>:</strong> Final system integration
              <div class="person-task">Deliverable: Working pipelined CPU</div>
            </div>
            <div class="task-card person-B">
              <strong><span class="ref-member" data-ref-member="B">Person B</span>, <span class="ref-member" data-ref-member="C">Person C</span>:</strong> Implement forwarding unit
              <div class="person-task">Deliverable: Hazard resolution</div>
            </div>
            <div class="task-card person-E">
              <strong><span class="ref-member" data-ref-member="E">Person E</span>:</strong> Create demo programs
              <div class="person-task">Deliverable: Impressive CPU demos</div>
            </div>
            <div class="task-card person-D">
              <strong><span class="ref-member" data-ref-member="D">Person D</span>, <span class="ref-member" data-ref-member="F">Person F</span>:</strong> Final documentation
              <div class="person-task">Deliverable: Complete project docs</div>
            </div>
          </div>

          <div class="deliverables">
            <strong>Week 6 Deliverables:</strong>
            <ul>
              <li>Fully functional RISC-V CPU</li>
              <li>Demo programs showcasing capabilities</li>
              <li>Complete project documentation</li>
              <li>Final presentation materials</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <div class="module-diagram">
      <h2>CPU Module Architecture</h2>
      <p>The RISC-V CPU follows a standard Harvard architecture with separate instruction and data memory:</p>

      <div class="module-grid">
        <div class="module-card">
          <h4>Instruction Fetch</h4>
          <p>Program Counter<br>Instruction Memory<br>Branch Prediction</p>
          <div class="person-task"><span class="ref-member" data-ref-member="C">Person C</span></div>
        </div>
        <div class="module-card">
          <h4>Instruction Decode</h4>
          <p>Register File Read<br>Immediate Generation<br>Control Signals</p>
          <div class="person-task"><span class="ref-member" data-ref-member="A">Person A</span> &amp; <span class="ref-member" data-ref-member="D">Person D</span></div>
        </div>
        <div class="module-card">
          <h4>Execution</h4>
          <p>ALU Operations<br>Branch Comparisons<br>Address Calculation</p>
          <div class="person-task"><span class="ref-member" data-ref-member="B">Person B</span></div>
        </div>
        <div class="module-card">
          <h4>Memory Access</h4>
          <p>Data Memory<br>Load/Store Operations<br>Memory Alignment</p>
          <div class="person-task"><span class="ref-member" data-ref-member="D">Person D</span></div>
        </div>
        <div class="module-card">
          <h4>Write Back</h4>
          <p>Register File Write<br>Result Selection<br>Pipeline Registers</p>
          <div class="person-task"><span class="ref-member" data-ref-member="A">Person A</span> &amp; <span class="ref-member" data-ref-member="D">Person D</span></div>
        </div>
        <div class="module-card">
          <h4>Control Unit</h4>
          <p>Instruction Decoding<br>Control Signals<br>Hazard Detection</p>
          <div class="person-task"><span class="ref-member" data-ref-member="A">Person A</span></div>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Key Success Factors</h2>
      <div class="task-grid">
        <div class="task-card">
          <h4>Weekly Integration</h4>
          <p>Hold at least 2 team sync-ups per week to ensure modules work together</p>
        </div>
        <div class="task-card">
          <h4>Interface First</h4>
          <p>Define all module interfaces in Week 1 and maintain consistency</p>
        </div>
        <div class="task-card">
          <h4>Test-Driven</h4>
          <p>Write tests before/during implementation for each module</p>
        </div>
        <div class="task-card">
          <h4>Version Control</h4>
          <p>Set up a git repo for collaboration</p>
        </div>
      </div>
    </div>

    <footer>
      <p>Local-only dashboard (data persists in this browser via localStorage). Append ?project=your-id to the URL to keep separate local datasets.</p>
    </footer>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Project ID namespace for localStorage (override via ?project=)
      const PROJECT_ID = new URLSearchParams(location.search).get('project') || 'pfs25';
      let applyingProgrammatically = false; // avoid echo loops on storage

      // Helpers
      function clampPercent(n){ return Math.min(100, Math.max(0, Math.round(Number(n) || 0))); }
      function colorFor(val){ if (val >= 80) return '#00b894'; if (val >= 50) return '#f39c12'; return '#e74c3c'; }
      function setRingPercent(svgEl, percent){
        const prog = svgEl.querySelector('.ring-progress');
        const r = parseFloat(prog.getAttribute('r')) || 24;
        const C = 2 * Math.PI * r;
        prog.style.strokeDasharray = String(C);
        const p = clampPercent(percent);
        prog.style.strokeDashoffset = String(C - (p/100)*C);
        prog.style.stroke = colorFor(p);
        return p;
      }

      // Member name behavior
      const names = document.querySelectorAll('.member-name[contenteditable="true"]');
      function updateRefs(key, text){
        document.querySelectorAll('[data-ref-member="' + key + '"]').forEach(r => r.textContent = text);
      }
      names.forEach(el => {
        const key = el.getAttribute('data-member');
        const storageKey = `member-name-${PROJECT_ID}-` + key;
        try { const saved = localStorage.getItem(storageKey); if (saved) el.textContent = saved; } catch (e) {}
        updateRefs(key, el.textContent.trim());

        el.addEventListener('blur', () => {
          const text = el.textContent.trim() || ('Person ' + key);
          try { localStorage.setItem(storageKey, text); } catch (e) {}
          el.textContent = text; updateRefs(key, text);
        });
        el.addEventListener('input', () => {
          const temp = el.textContent.trim() || ('Person ' + key);
          updateRefs(key, temp);
        });
        el.addEventListener('keydown', (ev) => { if (ev.key === 'Enter') { ev.preventDefault(); el.blur(); } });
      });

      // KPI: Tests
      (function initTests(){
        const chip = document.querySelector('.kpi-chip[data-kpi="tests"]');
        if (!chip) return;
        const ring = chip.querySelector('.micro-ring');
        const percentEl = chip.querySelector('[data-kpi-percent]');
        const passedInput = chip.querySelector('.input-passed');
        const totalInput = chip.querySelector('.input-total');
        const STORAGE = { passed: `kpi-${PROJECT_ID}-tests-passed`, total: `kpi-${PROJECT_ID}-tests-total` };

        function update(){
          let p = Math.max(0, Math.round(Number(passedInput.value) || 0));
          let t = Math.max(0, Math.round(Number(totalInput.value) || 0));
          if (p > t) p = t;
          passedInput.value = p; totalInput.value = t;
          const percent = t === 0 ? 0 : Math.round((p / t) * 100);
          const pv = setRingPercent(ring, percent);
          percentEl.textContent = pv + '%';
          return { p, t };
        }
        function persistLocal(p, t){
          try { localStorage.setItem(STORAGE.passed, String(p)); localStorage.setItem(STORAGE.total, String(t)); } catch(e){}
        }

        // Load local
        try {
          const sp = localStorage.getItem(STORAGE.passed);
          const st = localStorage.getItem(STORAGE.total);
          passedInput.value = sp !== null ? Math.max(0, Math.round(Number(sp) || 0)) : 0;
          totalInput.value = st !== null ? Math.max(0, Math.round(Number(st) || 0)) : 0;
        } catch {}
        update();

        // Events
        ['input'].forEach(evt => {
          passedInput.addEventListener(evt, () => { update(); });
          totalInput.addEventListener(evt, () => { update(); });
        });
        ['change','blur'].forEach(evt => {
          passedInput.addEventListener(evt, () => { const {p,t} = update(); persistLocal(p,t); });
          totalInput.addEventListener(evt, () => { const {p,t} = update(); persistLocal(p,t); });
        });
        [passedInput, totalInput].forEach(inp => {
          inp.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') { e.preventDefault(); const {p,t} = update(); persistLocal(p,t); inp.blur(); }
          });
        });

        // Cross-tab sync
        window.addEventListener('storage', (e) => {
          if (!e.key) return;
          if (e.key === STORAGE.passed || e.key === STORAGE.total) {
            applyingProgrammatically = true;
            try {
              const sp = localStorage.getItem(STORAGE.passed);
              const st = localStorage.getItem(STORAGE.total);
              passedInput.value = sp !== null ? Math.max(0, Math.round(Number(sp) || 0)) : 0;
              totalInput.value = st !== null ? Math.max(0, Math.round(Number(st) || 0)) : 0;
              update();
            } finally { applyingProgrammatically = false; }
          }
        });

        // Expose for other sections
        chip.__getValues = () => {
          const p = Math.max(0, Math.round(Number(passedInput.value) || 0));
          const t = Math.max(0, Math.round(Number(totalInput.value) || 0));
          return { p: Math.min(p, t), t };
        };
        chip.__applyValues = ({p, t}) => {
          applyingProgrammatically = true;
          try {
            passedInput.value = Math.max(0, Math.round(p || 0));
            totalInput.value = Math.max(0, Math.round(t || 0));
            update(); persistLocal(passedInput.value, totalInput.value);
          } finally { applyingProgrammatically = false; }
        };
      })();

      // KPI: Coverage
      (function initCoverage(){
        const chip = document.querySelector('.kpi-chip[data-kpi="coverage"]');
        if (!chip) return;
        const ring = chip.querySelector('.micro-ring');
        const percentEl = chip.querySelector('[data-kpi-percent]');
        const slider = chip.querySelector('.coverage-range');
        const number = chip.querySelector('.coverage-number');
        const STORAGE_KEY = `kpi-${PROJECT_ID}-coverage`;

        const apply = (v) => {
          const val = clampPercent(v);
          slider.value = val; number.value = val;
          const p = setRingPercent(ring, val);
          percentEl.textContent = p + '%';
          return val;
        };
        // Load local
        try {
          const s = localStorage.getItem(STORAGE_KEY);
          apply(s !== null ? s : 0);
        } catch { apply(0); }

        const syncFromSlider = () => apply(slider.value);
        const syncFromNumber = () => apply(number.value);
        const persistLocal = (v) => { try { localStorage.setItem(STORAGE_KEY, String(clampPercent(v))); } catch(e){} };

        slider.addEventListener('input', () => { syncFromSlider(); });
        slider.addEventListener('change', () => { const v = syncFromSlider(); persistLocal(v); });
        number.addEventListener('input', () => { syncFromNumber(); });
        number.addEventListener('change', () => { const v = syncFromNumber(); persistLocal(v); });
        number.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); const v = syncFromNumber(); persistLocal(v); number.blur(); } });

        // Cross-tab sync
        window.addEventListener('storage', (e) => {
          if (e.key === STORAGE_KEY) {
            applyingProgrammatically = true;
            try { const s = localStorage.getItem(STORAGE_KEY); apply(s !== null ? s : 0); } finally { applyingProgrammatically = false; }
          }
        });

        chip.__getValue = () => clampPercent(number.value);
        chip.__applyValue = (v) => {
          applyingProgrammatically = true;
          try { const val = apply(v); persistLocal(val); } finally { applyingProgrammatically = false; }
        };
      })();

      function getCoverageValue(){
        const chip = document.querySelector('.kpi-chip[data-kpi="coverage"]');
        if (!chip) return 0;
        return chip.__getValue ? chip.__getValue() : 0;
      }

      // Timeline tasks + Project Completion + Team Summary
      (function initTimeline(){
        const completionChip = document.querySelector('.kpi-chip[data-kpi="completion"]');
        const completionRing = completionChip?.querySelector('.micro-ring');
        const completionPercentEl = completionChip?.querySelector('[data-kpi-percent]');

        function updateCompletion(percent){
          if (!completionRing || !completionPercentEl) return;
          const p = setRingPercent(completionRing, percent);
          completionPercentEl.textContent = p + '%';
        }

        function taskStorageKey(id){ return `timeline-task-done-${PROJECT_ID}-${id}`; }

        // Build toggles and load local per-task state
        const weeks = Array.from(document.querySelectorAll('.timeline .week-container'));
        weeks.forEach((weekEl, wi) => {
          const tasks = Array.from(weekEl.querySelectorAll('.task-grid .task-card'));
          tasks.forEach((taskEl, ti) => {
            const id = `w${wi+1}-t${ti+1}`;
            taskEl.setAttribute('data-task-id', id);

            if (!taskEl.querySelector('.task-done-toggle')){
              const toggle = document.createElement('div');
              toggle.className = 'task-done-toggle';
              const cb = document.createElement('input');
              cb.type = 'checkbox'; cb.className = 'task-done-checkbox'; cb.id = `task-${id}`;
              cb.setAttribute('aria-label', 'Mark task as done');
              const lbl = document.createElement('label');
              lbl.className = 'task-done-label'; lbl.htmlFor = cb.id; lbl.textContent = 'Done';
              toggle.appendChild(cb); toggle.appendChild(lbl); taskEl.appendChild(toggle);

              // Load local state
              try {
                const saved = localStorage.getItem(taskStorageKey(id));
                const checked = saved === '1';
                cb.checked = checked; if (checked) taskEl.classList.add('is-done');
              } catch {}

              // Change handler (persist + recalc + storage event updates other tabs)
              cb.addEventListener('change', () => {
                const checked = cb.checked;
                taskEl.classList.toggle('is-done', checked);
                try { localStorage.setItem(taskStorageKey(id), checked ? '1' : '0'); } catch(e){}
                recalcAll();
              });
            }
          });
        });

        function recalcAll(){
          // Overall completion
          const allTasks = Array.from(document.querySelectorAll('.timeline .task-card[data-task-id]'));
          const total = allTasks.length;
          const done = allTasks.reduce((acc, el) => acc + (el.classList.contains('is-done') ? 1 : 0), 0);
          const overallPct = total === 0 ? 0 : Math.round((done / total) * 100);
          updateCompletion(overallPct);

          // Per-person summary
          const persons = ['A','B','C','D','E','F'];
          const stats = {}; persons.forEach(p => stats[p] = { done:0, total:0 });

          allTasks.forEach(task => {
            const refs = Array.from(task.querySelectorAll('.ref-member[data-ref-member]'))
              .map(el => (el.getAttribute('data-ref-member') || '').trim())
              .filter(code => /^[A-F]$/.test(code));
            if (refs.length === 0) return;
            const isDone = task.classList.contains('is-done');
            refs.forEach(code => {
              stats[code].total += 1;
              if (isDone) stats[code].done += 1;
            });
          });

          persons.forEach(code => {
            const chip = document.querySelector(`.summary-chip[data-person="${code}"]`);
            if (!chip) return;
            const ring = chip.querySelector('.nano-ring');
            const pctEl = chip.querySelector('[data-summary-percent]');
            const { done, total } = stats[code];
            const pct = total === 0 ? 0 : Math.round((done / total) * 100);
            const p = setRingPercent(ring, pct);
            pctEl.textContent = p + '%';
          });
        }

        // Initial compute
        recalcAll();

        // Cross-tab sync for tasks and names and KPIs
        window.addEventListener('storage', (e) => {
          if (!e.key) return;

          // Tasks
          if (e.key.startsWith(`timeline-task-done-${PROJECT_ID}-`)) {
            const id = e.key.split(`timeline-task-done-${PROJECT_ID}-`)[1];
            const taskEl = document.querySelector(`.task-card[data-task-id="${id}"]`);
            const cb = document.querySelector(`.task-card[data-task-id="${id}"] .task-done-checkbox`);
            if (taskEl && cb) {
              const checked = localStorage.getItem(e.key) === '1';
              applyingProgrammatically = true;
              try { cb.checked = checked; taskEl.classList.toggle('is-done', checked); recalcAll(); }
              finally { applyingProgrammatically = false; }
            }
          }

          // Names
          if (e.key.startsWith(`member-name-${PROJECT_ID}-`)) {
            const code = e.key.split(`member-name-${PROJECT_ID}-`)[1];
            const newName = localStorage.getItem(e.key) || `Person ${code}`;
            document.querySelectorAll(`[data-ref-member="${code}"]`).forEach(el => el.textContent = newName);
            document.querySelectorAll(`.member-name[data-member="${code}"]`).forEach(el => el.textContent = newName);
          }
        });

      })();

      // Small tip: allow switching "projects" locally via query param without code changes
      console.log('Local static mode. Using project namespace:', PROJECT_ID);
    });
  </script>
</body>
</html>
